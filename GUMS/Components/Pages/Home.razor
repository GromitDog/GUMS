@page "/"
@using Microsoft.AspNetCore.Authorization
@using GUMS.Data.Enums
@using GUMS.Services
@attribute [Authorize]
@rendermode InteractiveServer
@inject IPersonService PersonService

<PageTitle>Home - GUMS</PageTitle>

<div class="container-fluid py-4">
    <h1>Welcome to your unit!</h1>
    <p class="lead">Manage your Girl Guiding unit with ease</p>

    <div class="row mt-4">
        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Member Register</h5>
                    @if (_isLoading)
                    {
                        <div class="text-center py-2">
                            <div class="spinner-border spinner-border-sm text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="mb-3">
                            @if (_leaderCount > 0)
                            {
                                <p class="card-text mb-1">
                                    <strong>@_leaderCount</strong> @(_leaderCount == 1 ? "Leader" : "Leaders")
                                </p>
                            }
                            @if (_rainbowCount > 0)
                            {
                                <p class="card-text mb-1">
                                    <strong>@_rainbowCount</strong> @(_rainbowCount == 1 ? "Rainbow" : "Rainbows")
                                </p>
                            }
                            @if (_brownieCount > 0)
                            {
                                <p class="card-text mb-1">
                                    <strong>@_brownieCount</strong> @(_brownieCount == 1 ? "Brownie" : "Brownies")
                                </p>
                            }
                            @if (_guideCount > 0)
                            {
                                <p class="card-text mb-1">
                                    <strong>@_guideCount</strong> @(_guideCount == 1 ? "Guide" : "Guides")
                                </p>
                            }
                            @if (_rangerCount > 0)
                            {
                                <p class="card-text mb-1">
                                    <strong>@_rangerCount</strong> @(_rangerCount == 1 ? "Ranger" : "Rangers")
                                </p>
                            }
                            @if (_totalCount == 0)
                            {
                                <p class="card-text text-muted">No active members yet.</p>
                            }
                        </div>
                    }
                    <a href="/Register" class="btn btn-primary">Manage Members</a>
                </div>
            </div>
        </div>
    </div>
</div>